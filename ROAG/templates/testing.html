<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
{% load dajaxice_templatetags %}
<html>
<head>
    <title>Relics of Annorath - Testing</title>

    <!-- Meta stuff -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="robots" content="noindex">
    <script type="text/javascript" src="{% static "gui/js/lib/jquery.min.js" %}"></script>

    {% dajaxice_js_import %}
    <script type="text/javascript" src="{% staticdajax/jquery.dajax.core.js" %}"></script>

    {% load static %}
    <script type="text/javascript" src="{% static 'omnibus/omnibus.min.js' %}"></script>
</head>
<body>
    Caller: <input type="text" id="caller"/>
    Action: <input type="text" id="action"/>
    JSON String: <input type="text" id="json"/>
    Callback: <input type="text" id="callback"/>
    <div onclick="Dajaxice.interface.ajax_request_test(Dajax.process, {'caller': $('#caller').val(), 'action': $('#action').val(), 'data': $('#json').val(), 'callback': $('#callback').val()})">Submit</div>
    <br/><br/>
    Result: <div id="result"></div>
    <script>
        var message = '';
        var transport = WebSocket;
        var endpoint = 'wss://dev-gui.annorath-game.com:4242/ec';
        var options = {
            ignoreSender: true,
            autoReconnect: true,
            autoReconnectTimeout: 1000
        };
        var test = new Omnibus(transport, endpoint, options);
        var foo = test.openChannel('foo');

foo.on('bar', function(event) {
    // perform some custom action here...
    message = 'test';
});
    </script>
</body>
